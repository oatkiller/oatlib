(function(){var namespace="http://oatlab.com/oatlib/v2",qname_prefix=namespace+":::",o={},empty_array=[];o.qname=function(name){return qname_prefix+name};this[namespace]=o;o.toString=function(){return namespace};o.array=function(array_like){return Array.prototype.slice.call(array_like)};o.take=function(fn){return function(){var args=o.array(arguments);return fn.apply(args.shift(),args)}};o.store=function(global,name,fn){o[name]=o.take(fn);var qname=o.qname(name);global.prototype[qname]=fn;o[name].toString=function(){return qname}};o.hasOwnProperty=o.take(Object.prototype.hasOwnProperty);(function(){var qname=o.qname("im_an_array");Array.prototype[qname]=true;o.is_array=function(obj){return obj[qname]===true}})();var my_break={},method_name="each",qname=o.qname(method_name),array_version=function(iterator){for(var i=0;i<this.length;i++){if(iterator.call(this,this[i],i,this)===my_break){break}}return this},object_version=function(iterator){for(var property_name in this){if(o.hasOwnProperty(this,property_name)&&iterator.call(this,this[property_name],property_name,this)===my_break){break}}return this};o.store(Array,method_name,array_version);o[method_name]=o.take(function(){return o.is_array(this)||this.length!==undefined&&this.length-1 in this?array_version.apply(this,arguments):object_version.apply(this,arguments)});o[method_name].toString=function(){return qname};o.each_break=my_break;o.store(Array,"indexOf",Array.prototype.indexOf||function(element){var that=this,length=that.length,from=arguments[1]||0;if(from<0){from+=length}for(;from<length;from++){if(that.hasOwnProperty(from)&&that[from]===element){return from}}return -1});o.store(Function,"before",function(before){var fn=this;return function(){return before.apply(this,arguments)&&fn.apply(this,arguments)}});o.application_event=function(){return{bees:[],subscribe:function(fn){var bees=this.bees;bees.push(fn);return function(){bees.splice(bees[o.indexOf](fn),1)}},multi_subscribe:function(hash){var that=this;o.each(hash,function(fn,key){that.subscribe(fn[o.before](function(data){return data.type===key}))})},fire:function(){var that=this,args=arguments;that.bees[o.each](function(bee){bee.apply(that,args)})}}};o.store(Array,"reduce",function(fn){var length=this.length,i=0,memo;if(arguments.length>1){memo=arguments[1]}else{memo=this[i];i++}for(;i<length;i++){memo=fn.call(null,memo,this[i],i,this)}return memo});o.store(Array,"find",function(fn){var result=false,that=this;o.each(this,function(element,property_name,obj){if(fn.call(obj,element,property_name,obj)){result=element;return o.each_break}});return result});o.store(Array,"every",function(fn){var result=true,that=this;o.each(this,function(element,i){if(fn.call(this,element,i,that)===false){result=false;return o.each_break}});return result});o.store(Array,"contains",function(){var that=this;return o.array(arguments)[o.every](function(value){return that[o.find](function(element){return element===value})!==false})});(function(){var generic_version=function(fn){var response=o.is_array(this)?[]:{},property_name;o.each(this,function(element,property_name){return(response[property_name]=fn.call(this,this[property_name],property_name,this))});return response},array_version=Array.prototype.map||generic_version;o.store(Array,"map",array_version);o.map=o.take(generic_version);var qname=o.qname("map");o.map.toString=function(){return qname}})();o.type_of=function(value){var s=typeof value;if(s==="object"){if(value){if(o.is_array(value)){s="array"}else{if(value.nodeType!==undefined){s="node"}}}else{s="null"}}else{if(s==="function"&&value instanceof RegExp){s="object"}}return s};(function(){var fail={},are_objects_or_arrays=function(ra){return ra[o.find](function(element){return element&&element.nodeType===undefined})&&o.contains.apply(null,[["object","array"]].concat(ra[o.map](o.type_of)))};o.are_same=function(){var callee=arguments.callee,property_name;return arguments.length<2?true:o.array(arguments)[o.reduce](function(previous,current){if(previous===fail){return fail}if(previous===current){return current}if(are_objects_or_arrays([previous,current])){for(property_name in current){if(!(property_name in previous)){return fail}}for(property_name in previous){var these_are_same=callee(current[property_name],previous[property_name]);if(!these_are_same){return fail}}return current}return fail})!==fail}})();o.slice=o.take(Array.prototype.slice);o.store(Function,"bind",function(obj){var that=this,old_arguments=o.slice(arguments,1);return function(){return that.apply(obj,old_arguments.concat(o.array(arguments)))}});o.bound=function(n,l,u){return n<l?l:n>u?u:n};o.store(Function,"curry",function(){return this[o.bind].apply(this,[null].concat(o.array(arguments)))});(function(){var iterator=function(test,result_obj,an_obj){for(var property_name in an_obj){if(test(an_obj,property_name)){result_obj[property_name]=an_obj[property_name]}}return result_obj},combinator=function(an_iterator,result_obj){return o.slice(arguments,2)[o.reduce](an_iterator,result_obj)};o.combine=combinator[o.curry](iterator[o.curry](function(an_obj,property_name){return an_obj.hasOwnProperty(property_name)}));o.super_combine=combinator[o.curry](iterator[o.curry](function(){return true}))})();o.constructor=function(prototype){var fn=function(){return o.super_combine.apply(null,[this].concat(o.array(arguments)))};fn.prototype=prototype;return fn};o.reducer=function(memo_builder,iterator){return function(){return o.array(arguments)[o.reduce](iterator,memo_builder())}};(function(){var single_builder=function(prototype){return function(properties){return new (o.constructor(prototype))(properties)}};o.builder=o.reducer(function(){return single_builder({})},function(a_single_builder,a_prototype){return single_builder(a_single_builder(a_prototype))})})();o.store(Function,"call_once",function(){var that=this,fn=function(){var result=that.apply(this,arguments);return(fn=function(){return result}).apply(this,arguments)};return function(){return fn.apply(this,arguments)}});o.cartesian={};o.cartesian.distance=function(x1,y1,x2,y2){var x_difference=x2-x1,y_difference=y2-y1;return Math.sqrt(x_difference*x_difference+y_difference*y_difference)};o.store(Array,"chop",function(){this.length--;return this});o.dom={};o.join=o.take(Array.prototype.join);o.string=function(){return o.join(arguments,"")};o.error=function(){throw new Error(o.string.apply(null,o.array(arguments)))};(function(){var fn=function(){return(fn=o.dom.get_scroll_offsets=typeof window.pageYOffset==="number"?function(){return{y:window.pageYOffset,x:window.pageXOffset}}:document.body&&typeof document.body.scrollTop==="number"?function(){return{y:document.body.scrollTop,x:document.body.scrollLeft}}:document.documentElement&&typeof document.documentElement.scrollLeft==="number"?function(){return{y:document.documentElement.scrollTop,x:document.documentElement.scrollLeft}}:o.error[o.curry]("couldnt get scroll offsets")).apply(this,arguments)};o.dom.get_scroll_offsets=function(){return fn.apply(this,arguments)}})();o.dom.find_position=function(node){var rect=node.getBoundingClientRect();var offests=o.dom.get_scroll_offsets();return{y:rect.top+offests.y,x:rect.left+offests.x,get_height:function(){return rect.bottom-rect.top},get_width:function(){return rect.right-rect.left},rect:rect}};(function(){var fn=function(node){return(fn=o.dom.get_style=node.currentStyle?function(node,style){return node.currentStyle[style]}:function(node,style){return document.defaultView.getComputedStyle(node,null).getPropertyValue(style)}).apply(this,arguments)};o.dom.get_style=function(){return fn.apply(this,arguments)}})();o.dom.absolutize=function(node){var position=o.dom.find_position(node);var original_width=parseFloat(node.offsetWidth),original_height=parseFloat(node.offsetHeight);node.style.width=original_width+"px";node.style.height=original_height+"px";var horizontal_padding=parseFloat(node.offsetWidth)-original_width,vertical_padding=parseFloat(node.offsetHeight)-original_height;var offset_width=original_width-horizontal_padding,offset_height=original_height-vertical_padding;node.style.position="absolute";document.body.appendChild(node);node.style.top=position.y+"px";node.style.left=position.x+"px";node.style.width=offset_width+"px";node.style.height=offset_height+"px";node.style.margin="0";return position};o.regex=function(pattern,flags){return new RegExp(pattern,flags)};o.dom.add_class_name=function(element,class_name){var current_class_name=element.className;if(!o.regex(o.string("(^|\\s+)",class_name,"(\\s+|$)")).test(current_class_name)){element.className=[class_name,current_class_name].join(current_class_name?" ":"")}return element};(function(){var fn=function(){var test_div=document.createElement("div");test_div.innerHTML="a";try{o.array(test_div.childNodes);fn=o.dom.array=o.array}catch(e){fn=o.dom.array=function(array_like){var my_array=[];o.each(array_like,function(element){my_array.push(element)});return my_array}}return fn.apply(null,arguments)};o.dom.array=function(){return fn.apply(null,arguments)}})();o.store(Array,"first_result",function(fn){var result=null;o.each(this,function(){var my_result=fn.apply(this,arguments);if(my_result){result=my_result;return o.each_break}});return result});o.dom.array_find=function(iterate,node,test){var callee=arguments.callee;var result=test.call(this,node);if(result){return node}var nodes=iterate(node);var array_of_nodes=o.dom.array(nodes);var fn=function(descendant_node){return callee(iterate,descendant_node,test)};return array_of_nodes[o.first_result](fn)};o.store(Function,"capacitate",function(threshold){var timer=false,fn=this,arg_sets=[];threshold=threshold||110;return function(){timer&&clearTimeout(timer);arg_sets.push(arguments);timer=setTimeout(function(){arg_sets[o.each](function(args){fn.apply(null,args)})},threshold)}});o.dom.class_name_test_regex=function(class_name){return o.regex(o.string("(^|\\s+)",class_name,"(\\s+|$)"))};o.dom.clear_opacity=function(node){node.style.filter=node.style.opacity="";return node};(function(){var fn=function(ancestor){return(fn=o.dom.contains=ancestor.contains?function(ancestor,descendant){return ancestor.contains(descendant)}:function(ancestor,descendant){return(ancestor&&descendant&&ancestor.compareDocumentPosition(descendant)&16)!==0}).apply(this,arguments)};o.dom.contains=function(){return fn.apply(this,arguments)}})();o.store(Function,"debounce",function(threshold){var timer=false,fn=this;threshold=threshold||110;return function(){timer&&clearTimeout(timer);timer=setTimeout(fn[o.curry](arguments),threshold)}});o.dom.remove=function(node){return node.parentNode.removeChild(node)};o.dom.empty=function(node){while(node.childNodes.length){o.dom.remove(node.firstChild)}return node};o.dom.event={};(function(){var add_property_name,remove_property_name,prefix="",fn=function(add,node){if(node.attachEvent){add_property_name="attachEvent";remove_property_name="detachEvent";prefix="on"}else{add_property_name="addEventListener";remove_property_name="removeEventListener"}return(fn=o.dom.event.register=o.dom.event.register=function(add,node,type,fn,bubble){return node[add?add_property_name:remove_property_name](prefix+type,fn,bubble)}).apply(this,arguments)};o.dom.event.register=function(){return fn.apply(this,arguments)}})();o.dom.event.add_handler=o.dom.event.register[o.curry](true);o.dom.event.remove_handler=o.dom.event.register[o.curry](false);o.dom.event.events_to_remove=[];o.dom.event.add_handler(window,"unload",function(){o.dom.event.events_to_remove[o.each](function(args){args.length&&o.dom.event.remove_handler.apply(null,args)})});(o.dom.event.setup_get_event=function(my_window){o.dom.event.get_event=function(e){return e||my_window.event}})(window);(o.dom.event.setup_get_button=function(){var fn=function(e){return(fn=e.which?function(e){return e.which===3?"right":"left"}:function(e){return e.button===2?"right":"left"}).apply(this,arguments)};o.dom.event.get_button=function(e){return fn.apply(this,arguments)}})();o.dom.event.get_key=function(e){var result={};result.character=String.fromCharCode(result.key=e.keyCode||e.which);return result};(o.dom.event.setup_get_mouse_coordinates=function(my_document){var fn=function(e){return(fn=o.dom.event.get_mouse_coordinates=e.pageX!==undefined?function(e){return{x:e.pageX,y:e.pageY}}:function(e){var document_body=my_document.body,document_element=my_document.documentElement;return{x:e.clientX+document_body.scrollLeft+document_element.scrollLeft,y:e.clientY+document_body.scrollTop+document_element.scrollTop}}).apply(this,arguments)};o.dom.event.get_mouse_coordinates=function(e){return fn.apply(this,arguments)}})(document);(o.dom.event.setup_get_element_from_point=function(my_document){var fn=function(e){return(fn=o.dom.event.get_element_from_point=e.pageX===undefined||e.x===undefined?function(e){return my_document.elementFromPoint(e.clientX,e.clientY)}:function(e){return my_document.elementFromPoint(e.pageX,e.pageY)}).apply(this,arguments)};o.dom.event.get_element_from_point=function(e){return fn.apply(this,arguments)}})(document);o.get_object_property=function(obj,property_name){return obj[property_name]};o.concat=o.take(Array.prototype.concat);o.store(Function,"rcurry",function(){var that=this,old_arguments=o.array(arguments);return function(){return that.apply(this,o.concat(o.array(arguments),old_arguments))}});(o.dom.event.setup_get_related_target=function(){(function(fn_name,property){var fn=function(e){return(fn=e.relatedTarget?o.get_object_property[o.rcurry]("relatedTarget"):o.get_object_property[o.rcurry](property)).apply(this,arguments)};o.dom.event[fn_name]=function(){return fn.apply(this,arguments)};return arguments.callee})("get_related_mouseover_target","fromElement")("get_related_mouseout_target","toElement")})();(o.dom.event.setup_get_target=function(){var base_fn=function(property,e){var target=e[property];return target.nodeType!==3?target:target.parentNode},fn=function(e){return(fn=o.dom.event.get_target=e.target!==undefined?base_fn[o.curry]("target"):base_fn[o.curry]("srcElement")).apply(this,arguments)};o.dom.event.get_target=function(){return fn.apply(this,arguments)}})();(o.dom.event.setup_prevent_default=function(){var fn=function(e){return(fn=o.dom.event.prevent_default=e.preventDefault!==undefined?function(e){return e.preventDefault()}:function(e){return e.returnValue=false}).apply(this,arguments)};o.dom.event.prevent_default=function(){return fn.apply(this,arguments)}})();(function(){var fn=function(e){return(fn=o.dom.event.cancel="stopPropagation" in e?function(e){return e.stopPropagation()}:function(e){return e.cancelBubble=true}).apply(this,arguments)};o.dom.event.cancel=function(){return fn.apply(this,arguments)}})();(function(){var curry_with_this_dot_event=function(fn){return function(){return fn.call(this,this.event)}},prototype={get_event:o.dom.event.get_event,get_button:o.dom.event.get_button,get_key:o.dom.event.get_key,get_mouse_coordinates:o.dom.event.get_mouse_coordinates,get_element_from_point:o.dom.event.get_element_from_point,get_related_mouseover_target:o.dom.event.get_related_mouseover_target,get_related_mouseout_target:o.dom.event.get_related_mouseout_target,get_target:o.dom.event.get_target,prevent_default:o.dom.event.prevent_default,cancel:o.dom.event.cancel},my_builder;o.each(prototype,function(value,key){prototype[key]=curry_with_this_dot_event(value)});my_builder=o.builder(prototype);o.dom.event.get_abstraction=function(e){return my_builder({event:o.dom.event.get_event(e)})}})();o.splice=Array.prototype.splice;o.dom.event.add_listener=function(node,type,fn,bubble){var wrapped_fn=function(e){return fn.call(this,e,o.dom.event.get_abstraction(e))},args=[node,type,wrapped_fn,bubble];o.dom.event.add_handler.apply(null,args);o.dom.event.events_to_remove.push(args);return function(){return o.dom.event.remove_handler.apply(null,args)}};o.store(Array,"filter",function(fn){var results,assign;if(o.is_array(this)){results=[];assign=function(property_name,property){return results.push(property)}}else{results={};assign=function(property_name,property){results[property_name]=property}}o.each(this,function(element,property_name,that){if(fn.call(that,element,property_name,that)){assign(property_name,element)}});return results});(function(){var generic_fn=function(payload){var keys=[],that=this;o.each(that,function(element,key){keys.push(key)});keys[o.each](function(key){delete that[key]});o.combine(that,payload);return that},array_fn=function(payload){this.splice.apply(this,[0,this.length].concat(payload));return this};o.store(Array,"update",function(payload){return o.is_array(this)?array_fn.apply(this,arguments):generic_fn.apply(this,arguments)})})();(function(){var filter_delegates_by_descendant=function(delegates,descendant){return delegates[o.filter](function(delegate){return o.dom.contains(delegate.ancestor,descendant)})},consider_delegates_for_node=function(delegates,node,e,oe){var filtered_delegates=delegates[o.filter](function(delegate){if(!delegate.test(node)){return true}else{oe.delegate_target=node;delegate.action(e,oe);return false}}),new_node=node.parentNode;return filtered_delegates.length&&new_node?arguments.callee(filtered_delegates,new_node,e,oe):true},delegates=[],garbage_collect_delegates_by_type=function(type){delegates[type][o.update](delegates[type][o.filter](function(delegate){return"ancestor" in delegate}))},delegate_handler=function(type,e,oe){garbage_collect_delegates_by_type(type);var delegates_by_type=delegates[type],current_target=oe.get_target(),delegates_by_descendant=filter_delegates_by_descendant(delegates_by_type,current_target);return consider_delegates_for_node(delegates_by_descendant,current_target,e,oe)},add_delegate_handler_by_type=function(type){o.dom.event.add_listener(document.body,type,delegate_handler[o.curry](type),true)},get_or_create_array_of_delegates_by_type=function(type){if(!delegates.hasOwnProperty(type)){add_delegate_handler_by_type(type);delegates[type]=[]}return delegates[type]},recall_with_different_type=function(options,type){o.dom.event.delegate(o.combine({},options,{type:type}))};o.dom.event.delegate=function(options){var type=options.type||"click",array_of_delegates=get_or_create_array_of_delegates_by_type(type),delegate_object={test:options.test,action:options.action,ancestor:options.ancestor||document.body};array_of_delegates.push(delegate_object);var second_delete_function=options.type==="focus"?recall_with_different_type(options,"focusin"):options.type==="blur"?recall_with_different_type(options,"focusout"):function(){};return function(){second_delete_function();delete delegate_object.ancestor}}})();o.dom.find=function(iterate,node,test){return node&&((test.call(this,node)&&node)||arguments.callee.call(this,iterate,iterate(node),test))};o.dom.find_ancestor_or_self=o.dom.find[o.curry](function(node){return node.parentNode});o.dom.event.prevent_select=function(test){var body=document.body;body.onselectstart=function(e){var oe=o.dom.event.get_abstraction(e),target=oe.get_target(),draggable=target&&o.dom.find_ancestor_or_self(target,function(node){return test(node,e,oe)});return draggable?false:true};o.dom.event.delegate({ancestor:body,type:"mousedown",test:test,action:function(e,oe){oe.prevent_default()}})};o.dom.find_descendant_or_self=o.dom.array_find[o.curry](function(node){return node.childNodes});o.store(Array,"get_flattened",function(memo,iterator){return this[o.reduce](function(a,b){return a.concat(b)},[])});o.dom.find_descendants=function(node,test){var result=[],callee=arguments.callee;test(node)&&result.push(node);return node.firstChild===undefined?result:result.concat(o.dom.array(node.childNodes)[o.map](function(node){return callee(node,test)})[o.get_flattened]())};o.dom.find_following_sibling_or_self=o.dom.find[o.curry](function(node){return node.nextSibling});o.dom.find_preceding_sibling_or_self=o.dom.find[o.curry](function(node){return node.previousSibling});(function(){var fn=function(){var get_fragment_from_nodes=o.reducer(function(){return document.createDocumentFragment()},function(fragment,node){fragment.appendChild(node);return fragment}),div=document.createElement("div");return(fn=o.dom.fragment=function(html){div.innerHTML=html;return get_fragment_from_nodes.apply(null,o.dom.array(div.childNodes))}).apply(this,arguments)};o.dom.fragment=function(){return fn.apply(this,arguments)}})();(function(){var fn=function(node){return(fn=o.dom.get_text_content="innerText" in node?o.get_object_property[o.rcurry]("innerText"):o.get_object_property[o.rcurry]("textContent")).apply(this,arguments)};o.dom.get_text_content=function(){return fn.apply(this,arguments)}})();(function(){var fn=function(){return(fn=o.dom.get_window_size=(typeof window.innerHeight==="number")?function(){return{width:window.innerWidth,height:window.innerHeight}}:(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight))?function(){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}}:(document.body&&(document.body.clientWidth||document.body.clientHeight))?function(){return{width:document.body.clientWidth,height:document.body.clientHeight}}:o.error[o.curry]("cant get window size")).apply(this,arguments)};o.dom.get_window_size=function(){return fn.apply(this,arguments)}})();o.dom.has_class_name=function(element,class_name){return o.dom.class_name_test_regex(class_name).test(element.className)};o.dom.hide=function(node){node.style.display="none";return node};o.dom.insert_after=function(target,payload){var parent_node=target.parentNode;return parent_node.lastChild===target&&parent_node.appendChild(payload)||parent_node.insertBefore(payload,target.nextSibling)};o.dom.insert_before=function(target,payload){return target.parentNode.insertBefore(payload,target)};o.dom.is_node=function(obj){return obj===undefined||obj.nodeType===undefined?false:true};o.dom.is_tag_name=function(node,name){return node.tagName!==undefined&&node.tagName===name};o.dom.node=function(html){return o.dom.fragment(html).childNodes[0]};o.dom.parse_pixel_value=function(value){var minus_px=value.replace(/px$/);if(value!==minus_px){return parseFloat(minus_px)}o.error("couldnt get pixel value from: ",value)};o.dom.prepend_child=function(parent_node,node_to_insert){return parent_node.childNodes.length?parent_node.insertBefore(node_to_insert,parent_node.childNodes[0]):parent_node.appendChild(node_to_insert)};o.is_not_false=function(n){return n!==false};o.dom.query_string_obj_from_form=function(form_node){var pairs=["INPUT","TEXTAREA","OPTION"][o.reduce](function(memo,tag_name){return memo.concat(o.dom.array(form_node.getElementsByTagName(tag_name)))},[])[o.map](function(node){var result={node:node};if(node.name!==undefined&&node.name.length){result.key=node.name}else{if(o.dom.is_tag_name(node,"OPTION")){var select=o.dom.find_ancestor_or_self(node,o.dom.is_tag_name[o.rcurry]("SELECT"));result.node=select;if("name" in select){result.key=select.name}}}if(!("key" in result)){return false}if(((node.type==="checkbox"||node.type==="radio")&&node.checked===false)||(node.type==="option"&&node.selected===false)){return false}if(node.type==="file"||node.type==="submit"){return false}if(node.value!==""){result.value=node.value;return result}else{return false}})[o.filter](o.is_not_false);var last_submit_element_clicked=form_node.last_submit_element_clicked;if(last_submit_element_clicked&&last_submit_element_clicked.name!==""&&last_submit_element_clicked.value!==""){pairs.push({key:last_submit_element_clicked.name,value:last_submit_element_clicked.value,node:last_submit_element_clicked})}return pairs};o.dom.event.add_listener(document,"click",function(e,oe){var target=oe.get_target();if((o.dom.is_tag_name(target,"INPUT")||o.dom.is_tag_name(target,"BUTTON"))&&(target.type==="submit")&&target.form){target.form.last_submit_element_clicked=target}});o.dom.remove_class_name=function(element,class_name){element.className=element.className.replace(o.dom.class_name_test_regex(class_name),"$1$2").replace(/\s+/g," ").replace(/(^\s|\s$)/g,"");return element};o.dom.replace=function(node,new_node){return node.parentNode.replaceChild(new_node,node)};o.dom.unhide=function(node){node.style.display="";return node};o.dom.update=function(node,fragment){o.dom.empty(node);node.appendChild(fragment);return node};(function(){var object_prototype_to_string=Object.prototype.toString,to_strings={number:function(n){return n.toString(10)},string:function(n){return o.string('"',n,'"')},object:function(n,tab_count,processed_objs){if(n instanceof RegExp){var s=["/",n.source,"/"];n.ignoreCase&&s.push("i");n.multiline&&s.push("m");n.global&&s.push("g");return s.join("")}if(n.toString!==object_prototype_to_string){return n.toString()}var tab_string=(new Array((tab_count||1)+1)).join("\t"),object_graph=[];o.each(n,function(value,key){object_graph.push(o.string(key,": ",o.inspect(value,tab_count++,processed_objs)))});return o.string("{\n\t",object_graph.join(",\n\t"),"\n}")},"boolean":function(n){return n.toString()},"function":function(n){return"Function: "+(n.name===undefined||n.name.length===0?"anonymous":n.name)},"default":function(n){return n.toString()}};o.inspect=function(n,tab_count,processed_objs){if(processed_objs){if(o.indexOf(processed_objs,n)!==-1){return"circular reference: "+n.toString()}else{processed_objs.push(n)}}else{processed_objs=[]}var my_type=o.type_of(n);return(to_strings[my_type]||to_strings["default"]).apply(this,arguments)}})();o.invoke=function(n){return n.apply(this,o.array(arguments).slice(1))};o.json={};o.json.parse=function(text,reviver){var j,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,walk=function(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(o.hasOwnProperty(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)};cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")};(function(){var f=function(n){return n<10?"0"+n:n},toJSON=o.qname("toJSON");Date.prototype[toJSON]=function(key){return isFinite(this.valueOf())?o.string(this.getUTCFullYear(),"-",f(this.getUTCMonth()+1),"-",f(this.getUTCDate()),"T",f(this.getUTCHours()),":",f(this.getUTCMinutes()),":",f(this.getUTCSeconds()),"Z"):null};String.prototype[toJSON]=Number.prototype[toJSON]=Boolean.prototype[toJSON]=function(key){return this.valueOf()};var escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep,quote=function(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'},str=function(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?o.string("[\n",gap,partial.join(",\n"+gap),"\n",mind,"]"):"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}};o.json.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}());o.K=function(e){return e};o.store(Array,"last",function(){return this[this.length-1]});o.mask=function(obj){var C=function(){};C.prototype=obj;return new C()};o.store(Function,"memoize",function(memo){memo=memo||{};var that=this;return function(){var key=o.join(arguments);return o.hasOwnProperty(memo,key)?memo[key]:(memo[key]=that.apply(this,arguments))}});o.remote={};(function(){var fn=function(){var ajax_object=false,active_x_fn=function(version_string){return new ActiveXObject(version_string)},fns=[active_x_fn[o.curry]("Msxml3.XMLHTTP"),active_x_fn[o.curry]("Msxml2.XMLHTTP"),active_x_fn[o.curry]("Microsoft.XMLHTTP"),function(){return new XMLHttpRequest()}];while(fns.length!==0){try{var an_fn=fns.shift();ajax_object=an_fn();o.remote.ajax=fn=an_fn;return ajax_object}catch(e){ajax_object=false}}o.error("ajax not supported")};o.remote.ajax=function(){return fn.apply(this,arguments)}})();o.remote.query_string_from_obj=function(obj){return obj[o.reduce](function(memo,pair){memo.push(o.string(encodeURIComponent(pair.key),"=",encodeURIComponent(pair.value)));return memo},[]).join("&")};o.remote.query_string_obj_from_hash=function(hash){var result_array=[];o.each(hash,function(value,key){result_array.push({key:key,value:value})});return result_array};o.empty_function=function(){};(function(){var default_options={method:"GET",async:true},handler=function(ajax,options,call){if(ajax.readyState===4){call(options.on_complete);var status=ajax.status;[500,400,200][o.each](function(status_code){if(status>=status_code){call(options[o.string("on_",(status_code/100)>>>1,"xx")])}});if(status>299){call(options.on_failure)}else{if(status>199){call(options.on_success)}}}},default_headers={"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest",Accept:"application/json, text/javascript, */*"};o.remote.request=function(response_options){var headers=o.combine({},default_headers,response_options.headers),options=o.combine({},default_options,response_options),my_ajax=options.ajax||o.remote.ajax(),call=function(fn){fn&&fn(my_ajax,options)};options.headers=headers;my_ajax.onreadystatechange=function(){return handler[o.curry](my_ajax,options,call).apply(this,arguments)};my_ajax.open(options.method,options.url,options.async);options.headers&&o.each(options.headers,function(header_value,header_label){my_ajax.setRequestHeader(header_label,header_value)});!options.dont_send&&my_ajax.send(options.body||null);return my_ajax}})();(function(){var regex=(o.supplant_regex=/{([^{}]*)}/g);o.store(String,"supplant",function(o){return this.replace(regex,function(a,b){var r=o[b];return typeof r==="string"||typeof r==="number"?r:a})})})();o.store(String,"trim",function(){return this.replace(/^\s+|\s+$/g,"")});o.store(Array,"unique",function(){var uniques=[];this[o.each](function(ra_element){uniques[o.indexOf](ra_element)===-1&&uniques.push(ra_element)});return uniques})}).apply(this);